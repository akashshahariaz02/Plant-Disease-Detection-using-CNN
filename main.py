import os
import json
from PIL import Image

import numpy as np
import tensorflow as tf
import streamlit as st

# Define class names
CLASS_NAMES = ["ржЕрзНржпрж╛ржкрж▓ рж╕рзНржХрзНржпрж╛ржм", "ржЕрзНржпрж╛ржкрж▓ ржмрзНрж▓рзНржпрж╛ржХ рж░ржЯ", "ржЖржкрзЗрж▓ ржорж░рж┐ржЪрж╛", "ржЖржкрзЗрж▓ рж╕рзБрж╕рзНрже", "ржмрзНрж▓рзБржмрзЗрж░рж┐ рж╕рзБрж╕рзНрже",
                "ржЪрзЗрж░рж┐ ржкрж╛ржЙржбрж╛рж░рж┐ ржорж┐рж▓ржбрж┐ржЙ", "ржЪрзЗрж░рж┐ рж╕рзБрж╕рзНрже",
                "ржнрзБржЯрзНржЯрж╛ ржзрзВрж╕рж░ ржкрж╛рждрж╛рж░ ржжрж╛ржЧ",
                "ржнрзБржЯрзНржЯрж╛рж░ рж╕рж╛ржзрж╛рж░ржг ржорж░рж┐ржЪрж╛", "ржнрзБржЯрзНржЯрж╛рж░ ржирж░рзНржжрж╛рж░рзНржи рж▓рж┐ржл ржмрзНрж▓рж╛ржЗржЯ", "ржнрзБржЯрзНржЯрж╛ рж╕рзБрж╕рзНрже",
                "ржЖржЩрзНржЧрзБрж░ ржХрж╛рж▓рзЛ ржкржЪрж╛", "ржЖржЩрзНржЧрзБрж░ ржПрж╕ржХрж╛",
                "ржЖржЩрзНржЧрзБрж░ ржкрж╛рждрж╛рж░ ржмрзНрж▓рж╛ржЗржЯ", "ржЖржЩрзНржЧрзБрж░ рж╕рзБрж╕рзНрже",
                "ржХржорж▓рж╛ рж╣рж╛ржВрж▓ржВржмрж┐ржВ(рж╕рж╛ржЗржЯрзНрж░рж╛рж╕_рж╕ржмрзБржЬ)",
                "ржкрзАржЪ ржмрзНржпрж╛ржХржЯрзЗрж░рж┐ржпрж╝рж╛рж▓ рж╕рзНржкржЯ", "ржкрж┐ржЪ рж╕рзБрж╕рзНрже", "ржкрзЗржкрж╛рж░ржмрзЗрж▓ ржмрзНржпрж╛ржХржЯрзЗрж░рж┐ржпрж╝рж╛рж▓ рж╕рзНржкржЯ", "ржкрж┐ржкрж╛рж░ржмрзЗрж▓ рж╕рзБрж╕рзНрже",
                "ржЖрж▓рзБ ржкрзНрж░рж╛рж░ржорзНржнрж┐ржХ ржмрзНрж▓рж╛ржЗржЯ", "ржЖрж▓рзБ ржжрзЗрж░рзА ржмрзНрж▓рж╛ржЗржЯ", "ржЖрж▓рзБ рж╕рзБрж╕рзНрже", "рж░рж╛рж╕рзНржкржмрзЗрж░рж┐ рж╕рзБрж╕рзНрже",
                "рж╕ржпрж╝рж╛ржмрж┐ржи рж╕рзБрж╕рзНрже", "рж╕рзНржХрзЛржпрж╝рж╛рж╢ ржкрж╛ржЙржбрж╛рж░рж┐ ржорж┐рж▓ржбрж┐ржЙ", "рж╕рзНржЯрзНрж░ржмрзЗрж░рж┐ рж╕рзБрж╕рзНрже", "рж╕рзНржЯрзНрж░ржмрзЗрж░рж┐ ржкрж╛рждрж╛ ржЭрж▓рж╕рж╛ржирзЛ",
                "ржЯржорзЗржЯрзЛ ржмрзНржпрж╛ржХржЯрзЗрж░рж┐ржпрж╝рж╛рж▓ рж╕рзНржкржЯ", "ржЯржорзЗржЯрзЛ ржЖрж░рзНрж▓рж┐ ржмрзНрж▓рж╛ржЗржЯ", "ржЯржорзЗржЯрзЛ рж▓рзЗржЯ ржмрзНрж▓рж╛ржЗржЯ", "ржЯржорзЗржЯрзЛ рж▓рж┐ржл ржорзЛрж▓рзНржб",
                "ржЯржорзЗржЯрзЛ рж╕рзЗржкрзНржЯрзЛрж░рж┐ржпрж╝рж╛ ржкрж╛рждрж╛рж░ ржжрж╛ржЧ", "ржЯржорзЗржЯрзЛ рж╕рзНржкрж╛ржЗржбрж╛рж░ ржорж╛ржЗржЯрж╕",
                "ржЯржорзЗржЯрзЛ ржЯрж╛рж░рзНржЧрзЗржЯ рж╕рзНржкржЯ", "ржЯржорзЗржЯрзЛ ржЗржпрж╝рзЗрж▓рзЛ рж▓рж┐ржл ржХрж╛рж░рзНрж▓ ржнрж╛ржЗрж░рж╛рж╕",
                "ржЯржорзЗржЯрзЛ ржорзЛржЬрж╛ржЗржХ ржнрж╛ржЗрж░рж╛рж╕", "ржЯржорзЗржЯрзЛ рж╕рзБрж╕рзНрже"]

working_dir = os.path.dirname(os.path.abspath(__file__))
model_path = f"{working_dir}/trained_model/plant_disease_prediction_model.h5"

# Load the pre-trained model
model = tf.keras.models.load_model(model_path)

# Loading the class indices
class_indices = json.load(open(f"{working_dir}/class_indices.json"))

# Function to Load and Preprocess the Image using Pillow
def load_and_preprocess_image(image_path, target_size=(224, 224)):
    img = Image.open(image_path)
    img = img.resize(target_size)
    img_array = np.array(img)
    img_array = np.expand_dims(img_array, axis=0)
    img_array = img_array.astype('float32') / 255.
    return img_array

# Function to Predict the Class of an Image
def predict_image_class(model, image_path, class_indices):
    preprocessed_img = load_and_preprocess_image(image_path)
    predictions = model.predict(preprocessed_img)
    predicted_class_index = np.argmax(predictions, axis=1)[0]
    predicted_class_name = CLASS_NAMES[predicted_class_index]
    return predicted_class_name

# Plant disease solutions
disease_solutions = {
    'ржЕрзНржпрж╛ржкрж▓ ржмрзНрж▓рзНржпрж╛ржХ рж░ржЯ': 'рж░рж╛рж╕рж╛ржпрж╝ржирж┐ржХ ржЪрж┐ржХрж┐рзОрж╕рж╛: ржЕрзНржпрж╛ржкрж▓ ржмрзНрж▓рзНржпрж╛ржХ рж░ржЯ ржирж┐рзЯржирзНрждрзНрж░ржгрзЗрж░ ржЬржирзНржп рж╕ржХрзНрж░рж┐ржпрж╝ ржХрзЗржорж┐ржХрзНржпрж╛рж▓ ржпрзЗржоржи ржХрзНрж░ржорж┐ржпрж╝рж╛ржи, ржлрзЗржиржнрж╛рж▓рзЗржЯ, ржорж╛рж▓рж╛ржерж╛ржЗржи, ржкрж╛ржЗржкрзЗрж░рж╛ржлрж╕, рж╕рж╛ржЗржкрж╛рж░ржорзЗржерзНрж░рж┐ржи ржЗрждрзНржпрж╛ржжрж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рждрзЗ ржкрж╛рж░рзЗред',
    'ржЕрзНржпрж╛ржкрж▓ рж╕рзНржХрзНржпрж╛ржм': 'рж░рж╛рж╕рж╛ржпрж╝ржирж┐ржХ ржЪрж┐ржХрж┐рзОрж╕рж╛: рж╕рж╛ржирзЗржЪрж╛рж░ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ рж╕рзНржХрзНржпрж╛ржмрзЗрж░ ржмрж┐рж╕рзНрждрж╛рж░ ржУ ржмрж╛рж╣рж┐ржд рж░рзЛржЧрж╛ржгрзБржЧрзБрж▓рж┐ ржХржорж╛ржирзЛ ржпрзЗрждрзЗ ржкрж╛рж░рзЗред рж╕рзНржХрзНржпрж╛ржмрзЗрж░ ржкрзНрж░рждрж┐рж░рзЛржз ржХрж░рж╛рж░ ржЬржирзНржп ржкрзНрж░рзЛржлрж┐рж▓рж╛ржХрзНржЯрж┐ржХ рж░рзЛржЧржирж┐рж░рж╛ржкрждрзНрждрж╛ ржЪрж┐ржХрж┐рзОрж╕рж╛ ржЕржирзБржорзЛржжрж┐ржд рж╣рждрзЗ ржкрж╛рж░рзЗред',
    'ржЖржкрзЗрж▓ ржорж░рж┐ржЪ рж░рзЛржЧ': 'рж░рж╛рж╕рж╛ржпрж╝ржирж┐ржХ ржЪрж┐ржХрж┐рзОрж╕рж╛: ржЖржкрзЗрж▓ ржорж░рж┐ржЪ рж░рзЛржЧ ржирж┐рзЯржирзНрждрзНрж░ржгрзЗрж░ ржЬржирзНржп рж╕ржХрзНрж░рж┐ржпрж╝ ржХрзЗржорж┐ржХрзНржпрж╛рж▓ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рждрзЗ ржкрж╛рж░рзЗ, ржпрзЗржоржи ржХрзНрж░ржорж┐ржпрж╝рж╛ржи, ржлрзЗржиржнрж╛рж▓рзЗржЯ, ржорж╛рж▓рж╛ржерж╛ржЗржи, ржкрж╛ржЗржкрзЗрж░рж╛ржлрж╕, рж╕рж╛ржЗржкрж╛рж░ржорзЗржерзНрж░рж┐ржи ржЗрждрзНржпрж╛ржжрж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рждрзЗ ржкрж╛рж░рзЗред',
    'ржЖржкрзЗрж▓ рж╕рзБрж╕рзНрже': 'рж╕рзБрж╕рзНрже',
    'ржмрзНрж▓рзБржмрзЗрж░рж┐ рж╕рзБрж╕рзНрже': 'рж╕рзБрж╕рзНрже',
    'ржЪрзЗрж░рж┐ ржкрж╛ржЙржбрж╛рж░рж┐ ржорж┐рж▓ржбрж┐ржЙ': 'рж░рж╛рж╕рж╛ржпрж╝ржирж┐ржХ ржЪрж┐ржХрж┐рзОрж╕рж╛: ржЪрзЗрж░рж┐ ржкрж╛ржЙржбрж╛рж░рж┐ ржорж┐рж▓ржбрж┐ржЙ ржирж┐рзЯржирзНрждрзНрж░ржгрзЗрж░ ржЬржирзНржп ржмрж┐ржнрж┐ржирзНржи рж░рж╛рж╕рж╛ржпрж╝ржирж┐ржХ ржпрзЗржоржи ржХрзНрж░ржорж┐ржпрж╝рж╛ржи, ржлрзЗржиржнрж╛рж▓рзЗржЯ, ржорж╛ржирзЗржм, ржкрж╛ржЗржкрзЗрж░рж╛ржлрж╕, рж╕рж╛ржЗржкрж╛рж░ржорзЗржерзНрж░рж┐ржи ржЗрждрзНржпрж╛ржжрж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рждрзЗ ржкрж╛рж░рзЗред',
    'ржЪрзЗрж░рж┐ рж╕рзБрж╕рзНрже': 'рж╕рзБрж╕рзНрже',
    'ржнрзБржЯрзНржЯрж╛ ржзрзВрж╕рж░ ржкрж╛рждрж╛рж░ ржжрж╛ржЧ': 'рж░рж╛рж╕рж╛ржпрж╝ржирж┐ржХ ржЪрж┐ржХрж┐рзОрж╕рж╛: ржнрзБржЯрзНржЯрж╛ ржзрзВрж╕рж░ ржкрж╛рждрж╛рж░ ржжрж╛ржЧ ржирж┐рзЯржирзНрждрзНрж░ржгрзЗрж░ ржЬржирзНржп рж╕рж╛ржХрзНрж░рж┐ржпрж╝ ржХрзЗржорж┐ржХрзНржпрж╛рж▓ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рждрзЗ ржкрж╛рж░рзЗ, ржпрзЗржоржи ржХрзНржпрж╛ржкржЯрж╛ржи, ржорзНржпрж╛ржиржХрзЛржЬрзЗржм, ржмрзЗржЮрзНржЬрж┐ржорж╛ржЗржЯ, ржЕржХрзНрж╕рж┐ржХрзНрж▓рзЛрж░рж╛ржЗржб, ржорж╛ржирзЗржм, ржкрж╛ржЗржкрзЗрж░рж╛ржлрж╕, ржлрзБрж▓рж╛ржЗржпрж╝рж╛ржЗржЯ, рж╕рзНржкрж┐ржирзЛрж╕рж╛ржб, ржЯрзНрж░рж╛ржпрж╝рж╛ржЬрзЛрж▓, ржЗржЯрзНрж░рж╛ржХрзЛржирж╛ржЬрзЛрж▓, рж╕рж╛ржЗржкрж╛рж░ржорзЗржерзНрж░рж┐ржи, ржЗрждрзНржпрж╛ржжрж┐ред',
    'ржнрзБржЯрзНржЯрж╛рж░ рж╕рж╛ржзрж╛рж░ржг ржорж░рж┐ржЪрж╛': 'рж░рж╛рж╕рж╛ржпрж╝ржирж┐ржХ ржЪрж┐ржХрж┐рзОрж╕рж╛: ржнрзБржЯрзНржЯрж╛рж░ рж╕рж╛ржзрж╛рж░ржг ржорж░рж┐ржЪрж╛ ржирж┐рзЯржирзНрждрзНрж░ржгрзЗрж░ ржЬржирзНржп рж╕ржХрзНрж░рж┐ржпрж╝ ржХрзЗржорж┐ржХрзНржпрж╛рж▓ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рждрзЗ ржкрж╛рж░рзЗ, ржпрзЗржоржи ржХрзНрж░ржорж┐ржпрж╝рж╛ржи, ржлрзЗржиржнрж╛рж▓рзЗржЯ, ржорж╛рж▓рж╛ржерж╛ржЗржи, ржкрж╛ржЗржкрзЗрж░рж╛ржлрж╕, рж╕рж╛ржЗржкрж╛рж░ржорзЗржерзНрж░рж┐ржи ржЗрждрзНржпрж╛ржжрж┐ред',
    'ржнрзБржЯрзНржЯрж╛рж░ ржирж░рзНржжрж╛рж░рзНржи рж▓рж┐ржл ржмрзНрж▓рж╛ржЗржЯ': 'рж░рж╛рж╕рж╛ржпрж╝ржирж┐ржХ ржЪрж┐ржХрж┐рзОрж╕рж╛: рж░рзЛржЧ ржирж┐рзЯржирзНрждрзНрж░ржгрзЗрж░ ржЬржирзНржп рж╕ржХрзНрж░рж┐ржпрж╝ ржХрзЗржорж┐ржХрзНржпрж╛рж▓ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рждрзЗ ржкрж╛рж░рзЗ, ржпрзЗржоржи рж╕рж╛ржЗржкрж╛рж░ржорзЗржерзНрж░рж┐ржи, ржХрзНрж░ржорж┐ржпрж╝рж╛ржи, ржлрзЗржиржнрж╛рж▓рзЗржЯ, ржорж╛рж▓рж╛ржерж╛ржЗржи, ржкрж╛ржЗржкрзЗрж░рж╛ржлрж╕ ржЗрждрзНржпрж╛ржжрж┐ред',
    'ржнрзБржЯрзНржЯрж╛ рж╕рзБрж╕рзНрже': 'рж╕рзБрж╕рзНрже',
    'ржЖржЩрзНржЧрзБрж░ ржХрж╛рж▓рзЛ ржкржЪрж╛': 'рж░рж╛рж╕рж╛ржпрж╝ржирж┐ржХ ржЪрж┐ржХрж┐рзОрж╕рж╛: ржЖржЩрзНржЧрзБрж░ ржХрж╛рж▓рзЛ ржкржЪрж╛ рж░рзЛржЧрзЗрж░ ржирж┐рж░рзНржнрж░рж╢рзАрж▓ рж░рзЛржЧржирж┐рж░рж╛ржкрждрзНрждрж╛ ржЪрж┐ржХрж┐рзОрж╕рж╛рж░ ржЬржирзНржп рж╕ржХрзНрж░рж┐ржпрж╝ рж░рж╛рж╕рж╛ржпрж╝ржирж┐ржХ ржпрзЗржоржи ржХрж╛ржкржЯрж╛ржи, ржорзНржпрж╛ржиржХрзЛржЬрзЗржм, рж╕рзБрж▓ржлрж╛рж░ ржЗрждрзНржпрж╛ржжрж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рждрзЗ ржкрж╛рж░рзЗред',
    'ржЖржЩрзНржЧрзБрж░ ржПрж╕ржХрж╛': 'рж░рж╛рж╕рж╛ржпрж╝ржирж┐ржХ ржЪрж┐ржХрж┐рзОрж╕рж╛: рж░рзЛржЧ ржирж┐ржпрж╝ржирзНрждрзНрж░ржгрзЗ ржХрзНржпрж╛ржкржЯрж╛ржи, ржорзНржпрж╛ржиржХрзЛржЬрзЗржм, ржерж╛ржпрж╝рж╛ржорзЗржержХрзНрж╕рж╛ржо, рж╕рзБрж▓ржлрж╛рж░ ржПржмржВ ржХрзНржпрж╛рж▓рж╕рж┐ржпрж╝рж╛ржо ржХрж╛рж░рзНржмрж╛ржЗржб рж╕рж╣ ржХрж┐ржЫрзБ ржХрзЗржорж┐ржХрзНржпрж╛рж▓ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржпрзЗрждрзЗ ржкрж╛рж░рзЗред',
    'ржЖржЩрзНржЧрзБрж░ ржкрж╛рждрж╛рж░ ржмрзНрж▓рж╛ржЗржЯ': 'рж░рж╛рж╕рж╛ржпрж╝ржирж┐ржХ ржЪрж┐ржХрж┐рзОрж╕рж╛: ржЖржЩрзНржЧрзБрж░ ржкрж╛рждрж╛рж░ ржмрзНрж▓рж╛ржЗржЯ ржирж┐рзЯржирзНрждрзНрж░ржгрзЗрж░ ржЬржирзНржп рж╕ржХрзНрж░рж┐ржпрж╝ ржХрзЗржорж┐ржХрзНржпрж╛рж▓ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рждрзЗ ржкрж╛рж░рзЗ, ржпрзЗржоржи ржХрзЛржкрж╛рж░ ржЕржХрзНрж╕рж┐ржХрзНрж▓рзЛрж░рж╛ржЗржб, ржорзНржпрж╛ржиржХрзЗржм, ржЯрзЗржЯрзНрж░рж╛ржХржирж╛ржЬрзЛрж▓, ржЯрзЗржмрзБржХрзЛржирж╛ржЬрзЛрж▓, ржкрзНрж░рзЛржкрж┐ржХрзЛржирж╛ржЬрзЛрж▓, рж╕рж╛ржЗржкрж╛рж░ржорзЗржерзНрж░рж┐ржи ржЗрждрзНржпрж╛ржжрж┐ред',
    'ржЖржЩрзНржЧрзБрж░ рж╕рзБрж╕рзНрже': 'рж╕рзБрж╕рзНрже',
    'ржХржорж▓рж╛ рж╣рж╛ржВрж▓ржВржмрж┐ржВ(рж╕рж╛ржЗржЯрзНрж░рж╛рж╕_рж╕ржмрзБржЬ)': 'рж░рж╛рж╕рж╛ржпрж╝ржирж┐ржХ ржЪрж┐ржХрж┐рзОрж╕рж╛: ржХржорж▓рж╛ рж╣рж╛ржВрж▓ржВржмрж┐ржВ(рж╕рж╛ржЗржЯрзНрж░рж╛рж╕_рж╕ржмрзБржЬ) ржирж┐рзЯржирзНрждрзНрж░ржгрзЗрж░ ржЬржирзНржп рж╕ржХрзНрж░рж┐ржпрж╝ ржХрзЗржорж┐ржХрзНржпрж╛рж▓ ржпрзЗржоржи ржерж┐ржУржлрж╛ржирзЗржЯ-ржорзЗржерж╛ржЗрж▓, ржЕржХрзНрж╕рж┐ржХрзНрж▓рзЛрж░рж╛ржЗржбрж┐ржи, ржорж╛ржирзЗржм, рж╕рж┐ржкрж╛рж░ржорж┐ржерж┐ржи ржЗрждрзНржпрж╛ржжрж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рждрзЗ ржкрж╛рж░рзЗред',
    'ржкрзАржЪ ржмрзНржпрж╛ржХржЯрзЗрж░рж┐ржпрж╝рж╛рж▓ рж╕рзНржкржЯ': 'рж░рж╛рж╕рж╛ржпрж╝ржирж┐ржХ ржЪрж┐ржХрж┐рзОрж╕рж╛: ржкрзАржЪ ржмрзНржпрж╛ржХржЯрзЗрж░рж┐ржпрж╝рж╛рж▓ рж╕рзНржкржЯ ржирж┐рзЯржирзНрждрзНрж░ржгрзЗрж░ ржЬржирзНржп ржХрзНрж░ржорж┐ржпрж╝рж╛ржи, ржлрзЗржиржнрж╛рж▓рзЗржЯ, ржорж╛рж▓рж╛ржерж╛ржЗржи, ржкрж╛ржЗржкрзЗрж░рж╛ржлрж╕, рж╕рж╛ржЗржкрж╛рж░ржорзЗржерзНрж░рж┐ржи ржЗрждрзНржпрж╛ржжрж┐ рж╕ржХрзНрж░рж┐ржпрж╝ рж░рж╛рж╕рж╛ржпрж╝ржирж┐ржХ ржпржирзНрждрзНрж░ржкрж╛рждрж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рждрзЗ ржкрж╛рж░рзЗред',
    'ржкрзАржЪ рж╕рзБрж╕рзНрже': 'рж╕рзБрж╕рзНрже',
    'ржкрзЗржкрж╛рж░ржмрзЗрж▓ ржмрзНржпрж╛ржХржЯрзЗрж░рж┐ржпрж╝рж╛рж▓ рж╕рзНржкржЯ': 'рж░рж╛рж╕рж╛ржпрж╝ржирж┐ржХ ржЪрж┐ржХрж┐рзОрж╕рж╛: ржмрзНрж▓рж╛ржЗржЯрзЗрж░ ржирж┐рзЯржирзНрждрзНрж░ржгрзЗ ржПржмржВ ржмрзНржпрж╛ржХржЯрзЗрж░рж┐ржпрж╝рж╛рж▓ рж╕рзНржкржЯрзЗрж░ ржЬржирзНржп рж╕рж╛ржирзЗржЪрж╛рж░ ржПржмржВ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржпрзЗрждрзЗ ржкрж╛рж░рзЗ, ржПржЫрж╛ржбрж╝рж╛ржУ ржХрзЯрзЗржХржЯрж┐ ржкрзНрж░ржХрзНрж░рж┐ржпрж╝рж╛рж░ ржЬржирзНржп рж╕ржХрзНрж░рж┐ржпрж╝ рж░рж╛рж╕рж╛ржпрж╝ржирж┐ржХ ржпрзЗржоржи ржХржкрж╛рж░ рж╣рж╛ржЗржбрзНрж░ржХрзНрж╕рж╛ржЗржб, ржорзНржпрж╛ржиржХрзЗржм, ржХржкрж╛рж░ ржЕржХрзНрж╕рж┐ржХрзНрж▓рзЛрж░рж╛ржЗржб, ржмрж░рзНрждржорж╛ржи ржмрзНрж▓рж╛ржЗржЯ ржирж┐ржпрж╝ржирзНрждрзНрж░ржгрзЗ ржмрзНржпржмрж╣рзГржд рж╣ржпрж╝рзЗржЫрзЗ, ржПржЯрж┐ ржЕржХрзНрж╕рж┐ржХрзНрж▓рзЛрж░рж╛ржЗржб, ржорзНржпрж╛ржиржХрзЗржм, ржХрзНржпрж╛ржкржЯрж╛ржи ржПржмржВ рж╕рж╛ржлрж▓ржлрж╛рж░рзЗрж░ ржоржзрзНржпрзЗ ржкрзНрж░ржпрзЛржЬрзНржп рж╣рждрзЗ ржкрж╛рж░рзЗред',
    'ржкрж┐ржкрж╛рж░ржмрзЗрж▓ рж╕рзБрж╕рзН': 'рж╕рзБрж╕рзНрже',
    'ржЖрж▓рзБ ржЖрж░рзНрж▓рж┐ ржмрзНрж▓рж╛ржЗржЯ ': 'рж░рж╛рж╕рж╛ржпрж╝ржирж┐ржХ ржЪрж┐ржХрж┐рзОрж╕рж╛: ржЖрж▓рзБ ржЖрж░рзНрж▓рж┐ ржмрзНрж▓рж╛ржЗржЯ ржирж┐рзЯржирзНрждрзНрж░ржгрзЗрж░ ржЬржирзНржп ржлрж╕рж▓рзЗрж░ рж╕рж╛ржирзЗржЪрж╛рж░ ржПржмржВ ржкрзНрж░рждрж┐рж░рзЛржз ржХрж░рж╛рж░ ржЬржирзНржп ржлрж╕рж▓ ржкрзНрж░рзЛржлрж┐рж▓рж╛ржХрзНржЯрж┐ржХ ржЪрж┐ржХрж┐рзОрж╕рж╛ ржкрзНрж░ржпрзЛржЬрзНржп рж╣рждрзЗ ржкрж╛рж░рзЗред',
    'ржЖрж▓рзБ рж▓рзЗржЯ ржмрзНрж▓рж╛ржЗржЯ ': 'рж░рж╛рж╕рж╛ржпрж╝ржирж┐ржХ ржЪрж┐ржХрж┐рзОрж╕рж╛: ржЖрж▓рзБ рж▓рзЗржЯ ржмрзНрж▓рж╛ржЗржЯ ржирж┐рж░рзНржЧржд ржХрж░рж╛рж░ ржЬржирзНржп рж╕ржХрзНрж░рж┐ржпрж╝ ржХрзЗржорж┐ржХрзНржпрж╛рж▓ ржкржжржХрзНрж╖рзЗржк ржЕржирзБржорзЛржжрж┐ржд рж╣рждрзЗ ржкрж╛рж░рзЗ, ржпрзЗржоржи ржХрзЛржкрж╛рж░ рж╕рж╛рж▓ржлрзЗржЯ, ржХрзНрж░ржорж┐ржпрж╝рж╛ржи, ржорж╛рж▓рж╛ржерж╛ржЗржи, ржлрзЗржиржнрж╛рж▓рзЗржЯ, ржорж╛ржиржХрзЛржЬрзЗржм ржЗрждрзНржпрж╛ржжрж┐ред',
    'ржЖрж▓рзБ рж╕рзБрж╕рзНрже': 'рж╕рзБрж╕рзНрже',
    'рж░рж╛рж╕рзНржкржмрзЗрж░рж┐ рж╕рзБрж╕рзНрже': 'рж╕рзБрж╕рзНрже',
    'рж╕ржпрж╝рж╛ржмрж┐ржи рж╕рзБрж╕рзНрже': 'рж╕рзБрж╕рзНрже',
    'рж╕рзНржХрзЛржпрж╝рж╛рж╢ ржкрж╛ржЙржбрж╛рж░рж┐ ржорж┐рж▓ржбрж┐ржЙ':'рж░рж╛рж╕рж╛ржпрж╝ржирж┐ржХ ржЪрж┐ржХрж┐рзОрж╕рж╛: ржкрж╛ржЙржбрж╛рж░рж┐ ржорж┐рж▓ржбрж┐ржЙ ржкрзНрж░рждрж┐рж░рзЛржзрзЗрж░ ржЬржирзНржп рж╕рж╛рж▓ржлрж╛рж░ ржмрж╛ ржХрзНржпрж╛рж▓рж╕рж┐ржпрж╝рж╛ржо ржХрж╛рж░рзНржмрзЛржирзЗржЯ ржкрзНрж░ржпрж╝рзЛржЧ ржХрж░рж╛ ржпрзЗрждрзЗ ржкрж╛рж░рзЗред ржЖрж░ржУ ржЙржирзНржиржд ржЪрж┐ржХрж┐рзОрж╕рж╛рж░ ржЬржирзНржп ржмрж╛ржпрж╝рзЛржХржирзНржЯрзНрж░рзЛрж▓ ржПржЬрзЗржирзНржЯ ржпрзЗржоржи ржЯрзНрж░рж╛ржЗржХрзЛржбрж╛рж░рзНржорж╛ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржпрзЗрждрзЗ ржкрж╛рж░рзЗред',
    'рж╕рзНржЯрзНрж░ржмрзЗрж░рж┐ рж╕рзБрж╕рзНрже': 'рж╕рзБрж╕рзНрже',
    'рж╕рзНржЯрзНрж░ржмрзЗрж░рж┐ ржкрж╛рждрж╛ ржЭрж▓рж╕рж╛ржирзЛ': 'рж░рж╛рж╕рж╛ржпрж╝ржирж┐ржХ ржЪрж┐ржХрж┐рзОрж╕рж╛: ржкрж╛рждрж╛ ржЭрж▓рж╕рж╛ржирзЛ ржкрзНрж░рждрж┐рж░рзЛржзрзЗрж░ ржЬржирзНржп ржХржкрж╛рж░ ржнрж┐рждрзНрждрж┐ржХ ржлрж╛ржЩрзНржЧрж┐рж╕рж╛ржЗржб ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржпрзЗрждрзЗ ржкрж╛рж░рзЗред ржПржЫрж╛ржбрж╝рж╛, ржЦржирж┐ржЬ рждрзЗрж▓ ржУ ржЬрзИржмрж┐ржХ ржлрж╛ржЩрзНржЧрж┐рж╕рж╛ржЗржб ржпрзЗржоржи ржирж┐ржУржирж┐ржУржЯрж┐ржирзЛржпрж╝рзЗржб ржмрзНржпржмрж╣рж╛рж░рзЗрж░ рж╕рзБржкрж╛рж░рж┐рж╢ ржХрж░рж╛ рж╣ржпрж╝ред',
    'ржЯржорзЗржЯрзЛ ржмрзНржпрж╛ржХржЯрзЗрж░рж┐ржпрж╝рж╛рж▓ рж╕рзНржкржЯ': 'рж░рж╛рж╕рж╛ржпрж╝ржирж┐ржХ ржЪрж┐ржХрж┐рзОрж╕рж╛: ржмрзНржпрж╛ржХржЯрзЗрж░рж┐ржпрж╝рж╛рж▓ рж╕рзНржкржЯ ржирж┐ржпрж╝ржирзНрждрзНрж░ржгрзЗрж░ ржЬржирзНржп ржХржкрж╛рж░ ржнрж┐рждрзНрждрж┐ржХ ржмрзНржпрж╛ржХржЯрзЗрж░рж┐рж╕рж╛ржЗржб ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржпрзЗрждрзЗ ржкрж╛рж░рзЗред ржПржЫрж╛ржбрж╝рж╛, рж╕рзНржЯрзНрж░рзЗржкрзНржЯрзЛржорж╛ржЗрж╕рж┐ржи рж╕рж╛рж▓ржлрзЗржЯ ржУ ржЕржХрзНрж╕рж┐ржЯрзЗржЯрзНрж░рж╛рж╕рж╛ржЗржХрзНрж▓рж┐ржи ржмрзНржпржмрж╣рж╛рж░рзЗрж░ рж╕рзБржкрж╛рж░рж┐рж╢ ржХрж░рж╛ рж╣ржпрж╝ред',
    'ржЯржорзЗржЯрзЛ ржЖрж░рзНрж▓рж┐ ржмрзНрж▓рж╛ржЗржЯ': 'рж░рж╛рж╕рж╛ржпрж╝ржирж┐ржХ ржЪрж┐ржХрж┐рзОрж╕рж╛: ржЖрж░рзНрж▓рж┐ ржмрзНрж▓рж╛ржЗржЯ ржкрзНрж░рждрж┐рж░рзЛржзрзЗрж░ ржЬржирзНржп ржХрзНрж▓рзЛрж░рзЛржерж╛рж▓рзЛржирж┐рж▓ ржмрж╛ ржорж╛ржиржХрзЛржЬрзЗржм ржлрж╛ржЩрзНржЧрж┐рж╕рж╛ржЗржб ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржпрзЗрждрзЗ ржкрж╛рж░рзЗред',
    'ржЯржорзЗржЯрзЛ рж▓рзЗржЯ ржмрзНрж▓рж╛ржЗржЯ': 'рж░рж╛рж╕рж╛ржпрж╝ржирж┐ржХ ржЪрж┐ржХрж┐рзОрж╕рж╛: рж▓рзЗржЯ ржмрзНрж▓рж╛ржЗржЯ ржкрзНрж░рждрж┐рж░рзЛржзрзЗрж░ ржЬржирзНржп ржорзЗржЯрж╛рж▓рж╛ржХрзНрж╕рж┐рж▓ ржПржмржВ ржорж╛ржиржХрзЛржЬрзЗржм ржлрж╛ржЩрзНржЧрж┐рж╕рж╛ржЗржб ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржпрзЗрждрзЗ ржкрж╛рж░рзЗред',
    'ржЯржорзЗржЯрзЛ рж▓рж┐ржл ржорзЛрж▓рзНржб': 'рж░рж╛рж╕рж╛ржпрж╝ржирж┐ржХ ржЪрж┐ржХрж┐рзОрж╕рж╛: рж▓рж┐ржл ржорзЛрж▓рзНржб ржирж┐ржпрж╝ржирзНрждрзНрж░ржгрзЗрж░ ржЬржирзНржп ржХржкрж╛рж░ ржЕржХрзНрж╕рж┐ржХрзНрж▓рзЛрж░рж╛ржЗржб ржмрж╛ ржЪрж┐ржЯрзЛрж╕рж╛ржи ржнрж┐рждрзНрждрж┐ржХ ржлрж╛ржЩрзНржЧрж┐рж╕рж╛ржЗржб ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржпрзЗрждрзЗ ржкрж╛рж░рзЗред',
    'ржЯржорзЗржЯрзЛ рж╕рзЗржкрзНржЯрзЛрж░рж┐ржпрж╝рж╛ ржкрж╛рждрж╛рж░ ржжрж╛ржЧ': 'рж░рж╛рж╕рж╛ржпрж╝ржирж┐ржХ ржЪрж┐ржХрж┐рзОрж╕рж╛: рж╕рзЗржкрзНржЯрзЛрж░рж┐ржпрж╝рж╛ ржкрж╛рждрж╛рж░ ржжрж╛ржЧ ржкрзНрж░рждрж┐рж░рзЛржзрзЗрж░ ржЬржирзНржп ржХрзНрж▓рзЛрж░рзЛржерж╛рж▓рзЛржирж┐рж▓ ржмрж╛ ржбрж╛ржЗржХрзНржпрж╛ржкрзНржЯрзЗржи ржмрзНржпржмрж╣рж╛рж░рзЗрж░ рж╕рзБржкрж╛рж░рж┐рж╢ ржХрж░рж╛ рж╣ржпрж╝ред',
    'ржЯржорзЗржЯрзЛ рж╕рзНржкрж╛ржЗржбрж╛рж░ ржорж╛ржЗржЯрж╕': 'рж░рж╛рж╕рж╛ржпрж╝ржирж┐ржХ ржЪрж┐ржХрж┐рзОрж╕рж╛: рж╕рзНржкрж╛ржЗржбрж╛рж░ ржорж╛ржЗржЯрж╕ ржирж┐ржпрж╝ржирзНрждрзНрж░ржгрзЗрж░ ржЬржирзНржп ржЕрзНржпрж╛ржмрж╛ржорзЗржХржЯрж┐ржи ржмрж╛ рж╕ржк ржмрзНржпржмрж╣рж╛рж░рзЗрж░ рж╕рзБржкрж╛рж░рж┐рж╢ ржХрж░рж╛ рж╣ржпрж╝ред',
    'ржЯржорзЗржЯрзЛ ржЯрж╛рж░рзНржЧрзЗржЯ рж╕рзНржкржЯ': 'рж░рж╛рж╕рж╛ржпрж╝ржирж┐ржХ ржЪрж┐ржХрж┐рзОрж╕рж╛: ржЯрж╛рж░рзНржЧрзЗржЯ рж╕рзНржкржЯ ржирж┐ржпрж╝ржирзНрждрзНрж░ржгрзЗрж░ ржЬржирзНржп ржорзНржпрж╛ржиржХрзЛржЬрзЗржм ржПржмржВ ржХрзНрж▓рзЛрж░рзЛржерж╛рж▓рзЛржирж┐рж▓ ржлрж╛ржЩрзНржЧрж┐рж╕рж╛ржЗржб ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржпрзЗрждрзЗ ржкрж╛рж░рзЗред',
    'ржЯржорзЗржЯрзЛ ржЗржпрж╝рзЗрж▓рзЛ рж▓рж┐ржл ржХрж╛рж░рзНрж▓ ржнрж╛ржЗрж░рж╛рж╕': 'рж░рж╛рж╕рж╛ржпрж╝ржирж┐ржХ ржЪрж┐ржХрж┐рзОрж╕рж╛: ржЗржпрж╝рзЗрж▓рзЛ рж▓рж┐ржл ржХрж╛рж░рзНрж▓ ржнрж╛ржЗрж░рж╛рж╕ ржкрзНрж░рждрж┐рж░рзЛржзрзЗрж░ ржЬржирзНржп рж░рзЗрж╕рж┐рж╕рзНржЯрзНржпрж╛ржирзНржЯ ржЬрж╛ржд ржмрзНржпржмрж╣рж╛рж░рзЗрж░ ржкрж╛рж╢рж╛ржкрж╛рж╢рж┐ ржерж╛ржпрж╝рж╛ржорзЗржержХрзНрж╕рж╛ржо ржнрж┐рждрзНрждрж┐ржХ ржЗржирж╕рзЗржХрзНржЯрж┐рж╕рж╛ржЗржб ржмрзНржпржмрж╣рж╛рж░рзЗрж░ рж╕рзБржкрж╛рж░рж┐рж╢ ржХрж░рж╛ рж╣ржпрж╝ред',
    'ржЯржорзЗржЯрзЛ ржорзЛржЬрж╛ржЗржХ ржнрж╛ржЗрж░рж╛рж╕': 'рж░рж╛рж╕рж╛ржпрж╝ржирж┐ржХ ржЪрж┐ржХрж┐рзОрж╕рж╛: ржорзЛржЬрж╛ржЗржХ ржнрж╛ржЗрж░рж╛рж╕ ржкрзНрж░рждрж┐рж░рзЛржзрзЗрж░ ржЬржирзНржп рж░рзЛржЧржорзБржХрзНржд ржмрзАржЬ ржмрзНржпржмрж╣рж╛рж░ ржПржмржВ ржПржлрж┐ржб ржкрзНрж░рждрж┐рж░рзЛржзрзЗ ржЗржорж┐ржбрж╛ржХрзНрж▓рзЛржкрзНрж░рж┐ржб ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржпрзЗрждрзЗ ржкрж╛рж░рзЗред',
    'ржЯржорзЗржЯрзЛ рж╕рзБрж╕рзНрже': 'рж╕рзБрж╕рзНрже'
}

# Streamlit App
st.title('ЁЯМ┐ржЙржжрзНржнрж┐ржж рж░рзЛржЧ рж╢ржирж╛ржХрзНрждржХрж╛рж░рзА')
uploaded_image = st.file_uploader("ржПржХржЯрж┐ ржЫржмрж┐ ржЖржкрж▓рзЛржб ржХрж░рзБржи...", type=["jpg", "jpeg", "png"])

if uploaded_image is not None:
    image = Image.open(uploaded_image)
    col1, col2 = st.columns(2)

    with col1:
        resized_img = image.resize((150, 150))
        st.image(resized_img)

    with col2:
        if st.button('рж╢ржирж╛ржХрзНржд ржХрж░рзБржи'):
            # Preprocess the uploaded image and predict the class
            prediction = predict_image_class(model, uploaded_image, class_indices)
            st.success(f'ржлрж▓рж╛ржлрж▓: {prediction}')

            # Display solution for the predicted class if available
            if prediction in disease_solutions:
                solution = disease_solutions[prediction]
                if isinstance(solution, dict):
                    option = st.radio("рж╕ржорж╛ржзрж╛ржи ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рзБржи:", list(solution.keys()))
                    st.write("рж╕ржорж╛ржзрж╛ржи:", solution[option])
                else:
                    st.write("рж╕ржорж╛ржзрж╛ржи:", solution)
            else:
                st.write("ржПржЗ рж╢рзНрж░рзЗржгрзАрж░ ржЬржирзНржп ржХрзЛржи рж╕ржорж╛ржзрж╛ржи ржкрж╛ржУржпрж╝рж╛ ржпрж╛ржпрж╝ ржирж┐ред")

